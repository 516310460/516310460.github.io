[{"_path":"/guide/displaying/navigation","_draft":false,"_partial":false,"_empty":false,"title":"Navigation","description":"The fetchContentNavigation utility returns a tree of items based on the content/ directory structure and files.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Navigation generation is based on your content sources directory structure."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Based on the generated "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_id"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_path"}]},{"type":"text","value":" keys, we generate a whole navigation structure for your content."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It allows you to create advanced navigation components without having to maintain any querying logic related to it."}]},{"type":"element","tag":"h2","props":{"id":"structure"},"children":[{"type":"text","value":"Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The navigation object can be seen as a tree representing in a JSON format the structure of your content sources."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is divided in two type of nodes, "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"pages"}]},{"type":"text","value":" and "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"directories"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"content/\n  my-directory/\n    page.md\n","filename":"Directory structure"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"content/\n  my-directory/\n    page.md\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"{\n  \"title\": \"My Directory\",\n  \"_path\": \"/my-directory\",\n  \"children\": [\n    ...pagesNodes\n  ]\n}\n","filename":"Directory node","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n  \"title\": \"My Directory\",\n  \"_path\": \"/my-directory\",\n  \"children\": [\n    ...pagesNodes\n  ]\n}\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"{\n  \"title\": \"Page title\",\n  \"_path\": \"/my-directory/my-page\",\n  \"_id\": \"content:my-directory:page.md\"\n}\n","filename":"Page node","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n  \"title\": \"Page title\",\n  \"_path\": \"/my-directory/my-page\",\n  \"_id\": \"content:my-directory:page.md\"\n}\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"[\n  {\n    \"title\": \"My Directory\",\n    \"_path\": \"/my-directory\",\n    \"children\": [\n      {\n        \"title\": \"Page title\",\n        \"_path\": \"/my-directory/my-page\",\n        \"_id\": \"content:my-directory:page.md\"\n      }\n    ]\n  }\n]\n","filename":"Complete navigation","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[\n  {\n    \"title\": \"My Directory\",\n    \"_path\": \"/my-directory\",\n    \"children\": [\n      {\n        \"title\": \"Page title\",\n        \"_path\": \"/my-directory/my-page\",\n        \"_id\": \"content:my-directory:page.md\"\n      }\n    ]\n  }\n]\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"h3","props":{"id":"module"},"children":[{"type":"text","value":"Module"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The only key available in "},{"type":"element","tag":"a","props":{"href":"/api/configuration#navigation"},"children":[{"type":"text","value":"module configuration"}]},{"type":"text","value":" about navigation is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fields"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fields"}]},{"type":"text","value":" allows you to define the properties that will be included in the navigation items."}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"defineNuxtConfig({\n  content: {\n    navigation: {\n      fields: ['author', 'publishedAt']\n    }\n  }\n})\n","filename":"nuxt.config.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"defineNuxtConfig({\n  content: {\n    navigation: {\n      fields: ['author', 'publishedAt']\n    }\n  }\n})\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"---\ntitle: My Page\nauthor: 'Sébastien Chopin'\npublishedAt: '15-06-2022'\n---\n","filename":"page.md","language":"md"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"---\ntitle: My Page\nauthor: 'Sébastien Chopin'\npublishedAt: '15-06-2022'\n---\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"{\n  \"title\": \"My Page\",\n  \"author\": \"Sébastien Chopin\",\n  \"publishedAt\": \"15-06-2022\",\n  \"_path\": \"/page\",\n  \"_id\": \"content:page.md\",\n}\n","filename":"Navigation node","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n  \"title\": \"My Page\",\n  \"author\": \"Sébastien Chopin\",\n  \"publishedAt\": \"15-06-2022\",\n  \"_path\": \"/page\",\n  \"_id\": \"content:page.md\",\n}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"per-directory"},"children":[{"type":"text","value":"Per-directory"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alternatively, the navigation also allows you to configure directory nodes via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_dir.yml"}]},{"type":"text","value":" files."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It allows you to overwrite directory names, and add custom properties to directory nodes in navigation."}]},{"type":"element","tag":"h2","props":{"id":"excluding"},"children":[{"type":"text","value":"Excluding"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"navigation: false"}]},{"type":"text","value":" in the "},{"type":"element","tag":"a","props":{"href":"/guide/writing/markdown"},"children":[{"type":"text","value":"front-matter"}]},{"type":"text","value":" of a page to filter it out of navigation."}]},{"type":"element","tag":"code","props":{"code":"---\nnavigation: false\n---\n","filename":"page.md","language":"md"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"---\nnavigation: false\n---\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This pattern also works inside "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_dir.yml"}]},{"type":"text","value":" file, allowing you to filter out content directories and files."}]},{"type":"element","tag":"code","props":{"code":"navigation: false\n","filename":"_dir.yml","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"navigation: false\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_"}]},{"type":"text","value":" content prefix to exclude content directories and files."}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"content/\n  _hidden-directory/\n    page.md\n    index.md\n  not-hidden-directory/\n    _dir.yml\n    index.md\n    page.md\n","filename":"Directory structure"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"content/\n  _hidden-directory/\n    page.md\n    index.md\n  not-hidden-directory/\n    _dir.yml\n    index.md\n    page.md\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"[\n  {\n    \"title\": \"Not Hidden Directory\",\n    \"_path\": \"/not-hidden-directory\",\n    \"children\": [\n      {\n        \"title\": \"Page\",\n        \"_id\": \"content:not-hidden-directory:page.md\",\n        \"_path\": \"/not-hidden-directory/page\"\n      }\n    ]\n  }\n]\n","filename":"Navigation object","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[\n  {\n    \"title\": \"Not Hidden Directory\",\n    \"_path\": \"/not-hidden-directory\",\n    \"children\": [\n      {\n        \"title\": \"Page\",\n        \"_id\": \"content:not-hidden-directory:page.md\",\n        \"_path\": \"/not-hidden-directory/page\"\n      }\n    ]\n  }\n]\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"nested-navigation"},"children":[{"type":"text","value":"Nested navigation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can pass a "},{"type":"element","tag":"code-inline","props":{"lang":"ts"},"children":[{"type":"text","value":"queryContent()"}]},{"type":"text","value":" instance to the "},{"type":"element","tag":"code-inline","props":{"lang":"ts"},"children":[{"type":"text","value":"fetchContentNavigation()"}]},{"type":"text","value":" utility to filter the items returned."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That allows to create navigation objects for which the starting point is based on a specific content directory."}]},{"type":"element","tag":"code","props":{"code":"const query = queryContent({\n  where: {\n    _path: { $contains: '/your/navigation/starting/point' }\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const query = queryContent({\n  where: {\n    _path: { $contains: '/your/navigation/starting/point' }\n  }\n})\n"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Go deeper in the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"API"}]},{"type":"text","value":" section:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/api/composables/fetch-content-navigation"},"children":[{"type":"text","value":"fetchContentNavigation()"}]},{"type":"text","value":" composable to fetch navigation in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script>"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/api/components/content-navigation"},"children":[{"type":"text","value":"ContentNavigation"}]},{"type":"text","value":" component made to shorten access to navigation in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<template>"}]}]}]}]}]},"_type":"markdown","_id":"content:3.guide:2.displaying:3.navigation.md","_source":"content","_file":"3.guide/2.displaying/3.navigation.md","_extension":"md"},{"_path":"/guide/recipes/sitemap","_draft":false,"_partial":false,"_empty":false,"title":"Sitemap","description":"A sitemap file is useful for helping Google to better index your website, ensuring that the content you write can be visible on search results.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be created utilising the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sitemap"}]},{"type":"text","value":" library, so you'll need to install that which can be done like so:"}]},{"type":"element","tag":"code","props":{"code":"yarn add --dev sitemap\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add --dev sitemap\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-route"},"children":[{"type":"text","value":"Server Route"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will be utilising the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/features/server-routes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"server routes"}]},{"type":"text","value":" available within Nuxt, and to do so you'll need to create the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server/"}]},{"type":"text","value":" directory within your websites root directly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once this is done, create a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"routes/"}]},{"type":"text","value":" directory inside this, and add a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sitemap.xml.ts"}]},{"type":"text","value":" file, this will translate to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/sitemap.xml"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need to add the following:"}]},{"type":"element","tag":"code","props":{"code":"import { serverQueryContent } from '#content/server'\nimport { SitemapStream, streamToPromise } from 'sitemap'\n\nexport default defineEventHandler(async (event) => {\n  // Fetch all documents\n  const docs = await serverQueryContent(event).find()\n  const sitemap = new SitemapStream({\n    hostname: 'https://example.com'\n  })\n\n  for (const doc of docs) {\n    sitemap.write({\n      url: doc._path,\n      changefreq: 'monthly'\n    })\n  }\n  sitemap.end()\n\n  return streamToPromise(sitemap)\n})\n","filename":"server/routes/sitemap.xml.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { serverQueryContent } from '#content/server'\nimport { SitemapStream, streamToPromise } from 'sitemap'\n\nexport default defineEventHandler(async (event) => {\n  // Fetch all documents\n  const docs = await serverQueryContent(event).find()\n  const sitemap = new SitemapStream({\n    hostname: 'https://example.com'\n  })\n\n  for (const doc of docs) {\n    sitemap.write({\n      url: doc._path,\n      changefreq: 'monthly'\n    })\n  }\n  sitemap.end()\n\n  return streamToPromise(sitemap)\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, once users go to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://example.com/sitemap.xml"}]},{"type":"text","value":", you'll find the generated XML file with all your pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", you may want to pre-render the sitemap since the server route won't be able to run on a static hosting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do this using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nitro.prerender"}]},{"type":"text","value":" option in your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"import { defineNuxtConfig } from 'nuxt'\n\nexport default defineNuxtConfig({\n  // ...\n  nitro: {\n    prerender: {\n      routes: ['/sitemap.xml']\n    }\n  }\n})\n","filename":"nuxt.config.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { defineNuxtConfig } from 'nuxt'\n\nexport default defineNuxtConfig({\n  // ...\n  nitro: {\n    prerender: {\n      routes: ['/sitemap.xml']\n    }\n  }\n})\n"}]}]}]}]},"_type":"markdown","_id":"content:3.guide:3.recipes:1.sitemap.md","_source":"content","_file":"3.guide/3.recipes/1.sitemap.md","_extension":"md"}]