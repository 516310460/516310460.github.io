{"_path":"/ru/v1/getting-started/advanced","_draft":false,"_partial":false,"_empty":false,"title":"Продвинутое использование","description":"Изучите продвинутое использование модуля @nuxt/content.","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"программное-использование"},"children":[{"type":"text","value":"Программное использование"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$content"}]},{"type":"text","value":" доступен из "},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"@nuxt/content"}]}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обратите внимание, что вы можете получить к нему доступ только "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"после того, как модуль будет загружен"}]},{"type":"text","value":" Nuxt'ом. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"require('@nuxt/content')"}]},{"type":"text","value":" должно произойти в хуках или внутренних методах Nuxt."}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async ready () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['slug']).fetch()\n      console.log(files)\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async ready () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['slug']).fetch()\n      console.log(files)\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"статическая-генерация-сайта"},"children":[{"type":"text","value":"Статическая генерация сайта"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Начиная с версии 2.14+, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" имеет интегрированный обходчик, который будет автоматически обходить все ваши ссылки и генерировать маршруты основываясь на них. Поэтому вам не нужно ничего делать для сканирования ваших динамических маршрутов."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Также, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" будет пропускать этап сборки если код не был изменен используя кэш. Модуль content интегрируется с этим для игнорирования изменений внутри директории "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/"}]},{"type":"text","value":". Другими словами, когда вы измените контент на вашем сайте выполните развертывание, то шаг сборки будет пропущен."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Прочитайте больше в "},{"type":"element","tag":"a","props":{"href":"https://nuxtjs.org/blog/nuxt-static-improvements","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"этой статье"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"При использовании Nuxt <= 2.12 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", вам нужно указать динамические маршруты в "},{"type":"element","tag":"a","props":{"href":"https://nuxtjs.org/api/configuration-generate/#routes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"generate.routes"}]},{"type":"text","value":", потому что Nuxt не знает какие маршруты нужно генерировать."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Пример"}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async routes () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['path']).fetch()\n\n      return files.map(file => file.path === '/index' ? '/' : file.path)\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async routes () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['path']).fetch()\n\n      return files.map(file => file.path === '/index' ? '/' : file.path)\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Рекомендуем использовать Nuxt 2.14+ вместе с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", потому что это классно!"}]}]},{"type":"element","tag":"h2","props":{"id":"хуки"},"children":[{"type":"text","value":"Хуки"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Этот модуль добавляет несколько хуков, которые вы можете использовать:"}]},{"type":"element","tag":"h3","props":{"id":"contentfilebeforeinsert"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content:file:beforeInsert"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Позволяет добавить данные в документ прежде, чем он будет сохранен."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Аргументы:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Тип: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Свойства:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Смотрите "},{"type":"element","tag":"a","props":{"href":"/writing"},"children":[{"type":"text","value":"написание контента"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Пример"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Возьмем к примеру блог, мы используем "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file:beforeInsert"}]},{"type":"text","value":" чтобы добавить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"readingTime"}]},{"type":"text","value":" в документ, используя "},{"type":"element","tag":"a","props":{"href":"https://github.com/ngryman/reading-time","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"reading-time"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"text"}]},{"type":"text","value":" это контент markdown файла перед тем, как он будет преобразован в JSON AST, вы можете использовать его на этом этапе, но он не возвращается API."}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  hooks: {\n    'content:file:beforeInsert': (document) => {\n      if (document.extension === '.md') {\n        const { time } = require('reading-time')(document.text)\n\n        document.readingTime = time\n      }\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  hooks: {\n    'content:file:beforeInsert': (document) => {\n      if (document.extension === '.md') {\n        const { time } = require('reading-time')(document.text)\n\n        document.readingTime = time\n      }\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"обработка-горячей-перезагрузки"},"children":[{"type":"text","value":"Обработка горячей перезагрузки"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В режиме разработке модуль автоматически вызывает действие стора(Vuex) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxtServerInit"}]},{"type":"text","value":"(если задано) и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$nuxt.refresh()"}]},{"type":"text","value":" для перезагрузки текущей страницы."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В случае, если вам нужно слушать событие, чтобы выполнить что-то еще, вам нужно слушать событие "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content:update"}]},{"type":"text","value":" на стороне клиента, используя "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$nuxt.$on('content:update')"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default function ({ store }) {\n  // Только в режиме разработки\n  if (process.dev) {\n    window.onNuxtReady(($nuxt) => {\n      $nuxt.$on('content:update', ({ event, path }) => {\n        // Обновить категории в сторе\n        store.dispatch('fetchCategories')\n      })\n    })\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default function ({ store }) {\n  // Только в режиме разработки\n  if (process.dev) {\n    window.onNuxtReady(($nuxt) => {\n      $nuxt.$on('content:update', ({ event, path }) => {\n        // Обновить категории в сторе\n        store.dispatch('fetchCategories')\n      })\n    })\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Затем добавьте ваш плагин в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default {\n  plugins: [\n    '@/plugins/update.client.js'\n  ]\n}\n","filename":"nuxt.config.js","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default {\n  plugins: [\n    '@/plugins/update.client.js'\n  ]\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь, каждый раз, когда вы будете обновлять файл в вашей директории "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/"}]},{"type":"text","value":", будет выполняться метод "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetchCategories"}]},{"type":"text","value":".\nЭта документация использует его и вы можете узнать больше, взглянув на"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/blob/master/docs/plugins/categories.js","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"plugins/categories.js"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"api"},"children":[{"type":"text","value":"API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Этот модуль предоставляет API в разработке, поэтому вы можете легко увидеть JSON каждого каталога или файла, доступные на "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000/_content/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:3000/_content/"}]},{"type":"text","value":". Префикс "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_content"}]},{"type":"text","value":" установлен по умолчанию и может быть изменен в параметре  "},{"type":"element","tag":"a","props":{"href":"/configuration#apiprefix"},"children":[{"type":"text","value":"apiPrefix"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пример:"}]},{"type":"element","tag":"code","props":{"code":"-| content/\n---| articles/\n------| hello-world.md\n---| index.md\n---| settings.json\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"-| content/\n---| articles/\n------| hello-world.md\n---| index.md\n---| settings.json\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"На "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost:3000"}]},{"type":"text","value":" будет выглядеть так:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/articles"}]},{"type":"text","value":": список файлов в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/articles/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/articles/hello-world"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hello-world.md"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/index"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.md"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/settings"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings.json"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content"}]},{"type":"text","value":": список "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Endpoint доступен для "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" запросов, так что вы можете использовать параметры запроса: "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000/_content/articles?only=title&only=description&limit=10","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?only=title&only=description&limit=10"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Начиная с "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"v1.4.0"}]},{"type":"text","value":", этот endpoint также поддерживает "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" в параметрах запроса:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Все ключи, которые не принадлежат ни одному из ключей по умолчанию, будут применены к "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"where"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?author=..."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вы можете использовать "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$operators"}]},{"type":"text","value":" с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?author_regex=..."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Под капотом этот модуль использует LokiJS, вы можете взглянуть на "},{"type":"element","tag":"a","props":{"href":"https://github.com/techfort/LokiJS/wiki/Query-Examples#find-queries","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"примеры запросов"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вы можете использовать "},{"type":"element","tag":"a","props":{"href":"/configuration#nestedproperties"},"children":[{"type":"text","value":"вложенные параметры"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/products?categories.slug_contains=top"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вы можете узнать больше о конечных точках на "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/blob/master/lib/middleware.js","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"lib/middleware.js"}]},{"type":"text","value":"."}]}]}]}]},"position":7,"category":"Начало","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"программное-использование"},"children":[{"type":"text","value":"Программное использование"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$content"}]},{"type":"text","value":" доступен из "},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"@nuxt/content"}]}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Обратите внимание, что вы можете получить к нему доступ только "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"после того, как модуль будет загружен"}]},{"type":"text","value":" Nuxt'ом. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"require('@nuxt/content')"}]},{"type":"text","value":" должно произойти в хуках или внутренних методах Nuxt."}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async ready () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['slug']).fetch()\n      console.log(files)\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": [,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@nuxt/content'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"generate"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"ready"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"$content"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@nuxt/content'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"files"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"$content"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"only"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'slug'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"])."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"files"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"статическая-генерация-сайта"},"children":[{"type":"text","value":"Статическая генерация сайта"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Начиная с версии 2.14+, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" имеет интегрированный обходчик, который будет автоматически обходить все ваши ссылки и генерировать маршруты основываясь на них. Поэтому вам не нужно ничего делать для сканирования ваших динамических маршрутов."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Также, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" будет пропускать этап сборки если код не был изменен используя кэш. Модуль content интегрируется с этим для игнорирования изменений внутри директории "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/"}]},{"type":"text","value":". Другими словами, когда вы измените контент на вашем сайте выполните развертывание, то шаг сборки будет пропущен."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Прочитайте больше в "},{"type":"element","tag":"a","props":{"href":"https://nuxtjs.org/blog/nuxt-static-improvements","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"этой статье"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"При использовании Nuxt <= 2.12 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", вам нужно указать динамические маршруты в "},{"type":"element","tag":"a","props":{"href":"https://nuxtjs.org/api/configuration-generate/#routes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"generate.routes"}]},{"type":"text","value":", потому что Nuxt не знает какие маршруты нужно генерировать."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Пример"}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  generate: {\n    async routes () {\n      const { $content } = require('@nuxt/content')\n      const files = await $content().only(['path']).fetch()\n\n      return files.map(file => file.path === '/index' ? '/' : file.path)\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": [,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@nuxt/content'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"generate"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"routes"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"$content"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@nuxt/content'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"files"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"$content"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"only"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'path'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"])."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"files"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'/index'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'/'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Рекомендуем использовать Nuxt 2.14+ вместе с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", потому что это классно!"}]}]},{"type":"element","tag":"h2","props":{"id":"хуки"},"children":[{"type":"text","value":"Хуки"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Этот модуль добавляет несколько хуков, которые вы можете использовать:"}]},{"type":"element","tag":"h3","props":{"id":"contentfilebeforeinsert"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content:file:beforeInsert"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Позволяет добавить данные в документ прежде, чем он будет сохранен."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Аргументы:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Тип: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Свойства:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Смотрите "},{"type":"element","tag":"a","props":{"href":"/writing"},"children":[{"type":"text","value":"написание контента"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Пример"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Возьмем к примеру блог, мы используем "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file:beforeInsert"}]},{"type":"text","value":" чтобы добавить "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"readingTime"}]},{"type":"text","value":" в документ, используя "},{"type":"element","tag":"a","props":{"href":"https://github.com/ngryman/reading-time","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"reading-time"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"text"}]},{"type":"text","value":" это контент markdown файла перед тем, как он будет преобразован в JSON AST, вы можете использовать его на этом этапе, но он не возвращается API."}]}]},{"type":"element","tag":"code","props":{"code":"export default {\n  modules: [,\n    '@nuxt/content'\n  ],\n  hooks: {\n    'content:file:beforeInsert': (document) => {\n      if (document.extension === '.md') {\n        const { time } = require('reading-time')(document.text)\n\n        document.readingTime = time\n      }\n    }\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": [,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@nuxt/content'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"hooks"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'content:file:beforeInsert'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": ("}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"extension"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'.md'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"time"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'reading-time'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")("}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"readingTime"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-241f00"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"time"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"обработка-горячей-перезагрузки"},"children":[{"type":"text","value":"Обработка горячей перезагрузки"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В режиме разработке модуль автоматически вызывает действие стора(Vuex) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxtServerInit"}]},{"type":"text","value":"(если задано) и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$nuxt.refresh()"}]},{"type":"text","value":" для перезагрузки текущей страницы."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В случае, если вам нужно слушать событие, чтобы выполнить что-то еще, вам нужно слушать событие "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content:update"}]},{"type":"text","value":" на стороне клиента, используя "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$nuxt.$on('content:update')"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default function ({ store }) {\n  // Только в режиме разработки\n  if (process.dev) {\n    window.onNuxtReady(($nuxt) => {\n      $nuxt.$on('content:update', ({ event, path }) => {\n        // Обновить категории в сторе\n        store.dispatch('fetchCategories')\n      })\n    })\n  }\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" ({ "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" }) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3f326"},"children":[{"type":"text","value":"// Только в режиме разработки"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"dev"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"onNuxtReady"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"$nuxt"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"$nuxt"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"$on"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'content:update'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":", ({ "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" }) "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b3f326"},"children":[{"type":"text","value":"// Обновить категории в сторе"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-adae9a"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d81d13"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'fetchCategories'"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"      })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Затем добавьте ваш плагин в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default {\n  plugins: [\n    '@/plugins/update.client.js'\n  ]\n}\n","filename":"nuxt.config.js","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7020f4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bd27c"},"children":[{"type":"text","value":"plugins"}]},{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-36fde8"},"children":[{"type":"text","value":"'@/plugins/update.client.js'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Теперь, каждый раз, когда вы будете обновлять файл в вашей директории "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/"}]},{"type":"text","value":", будет выполняться метод "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetchCategories"}]},{"type":"text","value":".\nЭта документация использует его и вы можете узнать больше, взглянув на"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/blob/master/docs/plugins/categories.js","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"plugins/categories.js"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"api"},"children":[{"type":"text","value":"API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Этот модуль предоставляет API в разработке, поэтому вы можете легко увидеть JSON каждого каталога или файла, доступные на "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000/_content/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:3000/_content/"}]},{"type":"text","value":". Префикс "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_content"}]},{"type":"text","value":" установлен по умолчанию и может быть изменен в параметре  "},{"type":"element","tag":"a","props":{"href":"/configuration#apiprefix"},"children":[{"type":"text","value":"apiPrefix"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Пример:"}]},{"type":"element","tag":"code","props":{"code":"-| content/\n---| articles/\n------| hello-world.md\n---| index.md\n---| settings.json\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"-| content/"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"---| articles/"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"------| hello-world.md"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"---| index.md"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392501"},"children":[{"type":"text","value":"---| settings.json"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"На "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost:3000"}]},{"type":"text","value":" будет выглядеть так:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/articles"}]},{"type":"text","value":": список файлов в "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/articles/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/articles/hello-world"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hello-world.md"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/index"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.md"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content/settings"}]},{"type":"text","value":": вернет "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings.json"}]},{"type":"text","value":" как JSON"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/_content"}]},{"type":"text","value":": список "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Endpoint доступен для "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" и "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" запросов, так что вы можете использовать параметры запроса: "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000/_content/articles?only=title&only=description&limit=10","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?only=title&only=description&limit=10"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Начиная с "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"v1.4.0"}]},{"type":"text","value":", этот endpoint также поддерживает "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" в параметрах запроса:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Все ключи, которые не принадлежат ни одному из ключей по умолчанию, будут применены к "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"where"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?author=..."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вы можете использовать "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$operators"}]},{"type":"text","value":" с "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/articles?author_regex=..."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Под капотом этот модуль использует LokiJS, вы можете взглянуть на "},{"type":"element","tag":"a","props":{"href":"https://github.com/techfort/LokiJS/wiki/Query-Examples#find-queries","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"примеры запросов"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Вы можете использовать "},{"type":"element","tag":"a","props":{"href":"/configuration#nestedproperties"},"children":[{"type":"text","value":"вложенные параметры"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000/_content/products?categories.slug_contains=top"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вы можете узнать больше о конечных точках на "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/blob/master/lib/middleware.js","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"lib/middleware.js"}]},{"type":"text","value":"."}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b3f326{color:#7F848E}.ct-241f00{color:#56B6C2}.ct-adae9a{color:#E5C07B}.ct-d81d13{color:#61AFEF}.ct-36fde8{color:#98C379}.ct-4bd27c{color:#E06C75}.ct-392501{color:#ABB2BF}.ct-7020f4{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"программное-использование","depth":2,"text":"Программное использование","children":[{"id":"статическая-генерация-сайта","depth":3,"text":"Статическая генерация сайта"}]},{"id":"хуки","depth":2,"text":"Хуки","children":[{"id":"contentfilebeforeinsert","depth":3,"text":"content:file:beforeInsert"}]},{"id":"обработка-горячей-перезагрузки","depth":2,"text":"Обработка горячей перезагрузки"},{"id":"api","depth":2,"text":"API"}]}},"_type":"markdown","_id":"v1-ru:ru:v1:1.getting-started:7.advanced.md","_source":"v1-ru","_file":"ru/v1/1.getting-started/7.advanced.md","_extension":"md"}